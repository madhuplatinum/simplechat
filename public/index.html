<!DOCTYPE html>
<html>
<head>
  <title>Simple Chat</title>
</head>
<body>
  <h1>Simple Messenger</h1>
  <label>Enter Room Code:</label>
  <input id="room" />
  <button onclick="joinRoom()">Join</button>

  <div id="chat" style="display:none;">
    <div id="messages" style="border:1px solid #000; height:200px; overflow:auto;"></div>
    <input id="msg" placeholder="Type message" />
    <button onclick="sendMsg()">Send</button>
  </div>

  <script>
    let socket;

    function joinRoom() {
      const room = document.getElementById("room").value;
      socket = new WebSocket(`ws://${location.host}`);
      socket.onopen = () => {
        socket.send(JSON.stringify({ join: room }));
        document.getElementById("chat").style.display = "block";
      };
      socket.onmessage = (event) => {
        const messages = document.getElementById("messages");
        const div = document.createElement("div");
        div.innerText = event.data;
        messages.appendChild(div);
      };
    }

    function sendMsg() {
      const msg = document.getElementById("msg").value;
      socket.send(JSON.stringify({ text: msg }));
      document.getElementById("msg").value = '';
    }
  </script>
</body>
</html>
